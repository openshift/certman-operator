# THIS FILE IS GENERATED BY BOILERPLATE. DO NOT EDIT.
apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: osde2e-focused-tests

parameters:
  - name: OSDE2E_CONFIGS
    required: true
  - name: TEST_HARNESS_IMAGE
    required: true
  - name: OCM_TOKEN
    required: true
  - name: OCM_CCS
    required: false
  - name: AWS_ACCESS_KEY_ID
    required: false
  - name: AWS_SECRET_ACCESS_KEY
    required: false
  - name: CLOUD_PROVIDER_REGION
    required: false
  - name: GCP_CREDS_JSON
    required: false
  - name: JOBID
    generate: expression
    from: "[0-9a-z]{7}"
  - name: IMAGE_TAG
    value: ''
    required: true
  - name: LOG_BUCKET
    value: 'osde2e-logs'
objects:
  - apiVersion: batch/v1
    kind: Job
    metadata:
      name: osde2e-${OPERATOR_NAME}-${IMAGE_TAG}-${JOBID}
    spec:
      backoffLimit: 0
      template:
        spec:
          restartPolicy: Never
          containers:
            - name: osde2e
              image: quay.io/app-sre/osde2e:latest
              command:
                - /osde2e
              args:
                - test
                - --configs
                - ${OSDE2E_CONFIGS}
              securityContext:
                runAsNonRoot: true
                allowPrivilegeEscalation: false
                capabilities:
                  drop: ["ALL"]
                seccompProfile:
                  type: RuntimeDefault
              env:
                - name: TEST_HARNESSES
                  value: ${TEST_HARNESS_IMAGE}:${IMAGE_TAG}
                - name: OCM_TOKEN
                  value: ${OCM_TOKEN}
                - name: OCM_CCS
                  value: ${OCM_CCS}
                - name: AWS_ACCESS_KEY_ID
                  value: ${AWS_ACCESS_KEY_ID}
                - name: AWS_SECRET_ACCESS_KEY
                  value: ${AWS_SECRET_ACCESS_KEY}
                - name: CLOUD_PROVIDER_REGION
                  value: ${CLOUD_PROVIDER_REGION}
                - name: GCP_CREDS_JSON
                  value: ${GCP_CREDS_JSON}
                - name: LOG_BUCKET
                  value: ${LOG_BUCKET}                 